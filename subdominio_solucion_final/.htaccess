# Configuración específica para LiteSpeed en subdominio
# financiero.jej664caren.cl

RewriteEngine On

# Permitir acceso directo a archivos y directorios existentes
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Para TODAS las demás rutas, servir index.php
RewriteRule ^(.*)$ index.php [L,QSA]

# Configuración específica para LiteSpeed
<IfModule LiteSpeed>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php [L,QSA]
</IfModule>

# Configuración de CORS
Header always set Access-Control-Allow-Origin "*"
Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With"

# Manejar preflight requests
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L]

# Configuración de caché para archivos estáticos
<FilesMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|map|json)$">
    Header set Cache-Control "public, max-age=31536000"
</FilesMatch>

# Configuración específica para subdominio
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    
    # Permitir archivos estáticos si existen
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^ - [L]
    
    # Permitir directorios si existen
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
    
    # Todo lo demás va a index.php
    RewriteRule ^(.*)$ index.php [L,QSA]
</IfModule> 